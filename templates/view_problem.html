{% extends "base.html" %}

{% block title %}问题详细信息{% endblock %}

{% block content %}

    <div class="container" style="margin-top: 10px">
        <h1>Problem Details</h1>
    </div>
    <div class="container">
        <div class="row-fluid">
            <div class="span12">
                <div id="show_problem">

                    <ul class="nav nav-pills" role="tablist">
                      <li role="presentation" class="active"><a >{{problem.oj_all}}<span class="badge">{{problem.title}}</span></a></li>
                    </ul>
                    <ul class="list-group">
                      <li class="list-group-item">
                        <span class="badge">{{problem.ac_user_num}}</span>
                        AC count
                      </li>
                      <li class="list-group-item">
                        <span class="badge"> {{problem.user_num}}</span>
                        total count
                      </li>
                      <li class="list-group-item">
                        <span class="badge"> {{problem.difficulty_rank}}</span>
                        Difficult
                      </li>
                    </ul>
                </div>
            </div>
        </div>
        <h3> Description <button class="btn btn-danger" id="btn_des">Toggle</button> </h3>
        <div class="row" id="des">
            <div class="col-md-8 col-md-offset-2 well">
                {% autoescape off %}
                    {{problem.description}}
                {% endautoescape %}
            </div>
        </div>
        <h3> Tags <button class="btn btn-danger" id="btn_tag">Toggle</button> </h3>
        <div id="tags" class="row" style="line-height:420%">
                {% for tag in problem.get_tags%}
                    <span style="margin-left:20px"><a style='font-size:{{tag.get_rk}}%'>{{tag.name}}</a></span>
                {% endfor %}
        </div>
        {% if status > 0 %}
            {%if status == 1 %}
                <h3> Action <a href="/add_note/{{problem.pk}}" class="btn btn-info" id="btn_action1">Add Note</a> </h3>
            {% else %}
                <h3> Action <button class="btn btn-success" id="btn_action2">Edit Note</button> </h3>
            {%endif %}
        {% endif %}
        <ul class="list-group">
            {% if not problem.get_notes %}
                {% if status > 0 %}
                    <div class="alert alert-info alert-dismissible" role="alert">
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <strong>Heads up!</strong> No note are available.Try to <a href="/add_note/{{problem.pk}}" class="alert-link">add one</a>?
                    </div>
                {% endif %}
            {% else %}
                <div class="list-group">
                {% for note in problem.get_notes|dictsort:"update_time" %}
                    {% if note.author.user == user %}
                        <a href="/view_note/{{note.pk}}" class="list-group-item list-group-item-danger">
                            <span class="badge">{{note.update_time}}</span>
                            * {{ note.author.user.username }}({{ note.author.real_name }}):
                            {{note.text}}
                        </a>
                    {% elif problem.next_var|divisibleby:"2" %}
                        <a href="/view_note/{{note.pk}}" class="list-group-item list-group-item-info">
                            <span class="badge">{{note.update_time}}</span>
                            * {{ note.author.user.username }}({{ note.author.real_name }}):
                            {{note.text}}
                        </a>
                    {% else %}
                        <a href="/view_note/{{note.pk}}" class="list-group-item list-group-item-success">
                            <span class="badge">{{note.update_time}}</span>
                            * {{ note.author.user.username }}({{ note.author.real_name }}):
                            {{note.text}}
                        </a>
                    {% endif %}
                {% endfor %}
                </div>
            {% endif %}
        </ul>
    </div>
    </div>




<script type="text/javascript">
$(document).ready(function(){
  $('#tags').hide();
  $('#des').hide();
});
</script>
<script type="text/javascript">
$(function(){
  $('#btn_tag').click(function(){
    if($('#tags').is(':hidden')){
      $('#tags').show();
    }
    else{
      $('#tags').hide();
    }
  })
})
$(function(){
  $('#btn_des').click(function(){
    if($('#des').is(':hidden')){
      $('#des').show();
    }
    else{
      $('#des').hide();
    }
  })
})
</script>
{% endblock %}